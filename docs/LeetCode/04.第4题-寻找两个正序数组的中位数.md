---
title: 寻找两个正序数组的中位数
date: 2020-07-22 21:08:59
permalink: /pages/543da2/
categories:
  - LeetCode
tags:
  - 算法
---

# 寻找两个正序数组的中位数

给定两个大小为 m 和 n 的正序（从小到大）数组  nums1 和  nums2。

请你找出这两个正序数组的中位数，并且要求算法的时间复杂度为  O(log(m + n))。

你可以假设  nums1  和  nums2  不会同时为空。

#### 示例 1:

```
nums1 = [1, 3]
nums2 = [2]

则中位数是 2.0
```

#### 示例 1:

```
nums1 = [1, 2]
nums2 = [3, 4]

则中位数是 (2 + 3)/2 = 2.5
```

<!-- more -->

## 合并数组 ➕ 哈希排序

### 思路

- 合并成一个新数组
- 进行希尔排序
- 判断是偶数还是奇数
  - 奇数的话 取中间
  - 偶数的话 取中间 2 个数平均值

### 代码

```JavaScript
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @return {number}
 */
const findMedianSortedArrays = function (nums1, nums2) {
  // 1.1 合并为新数组。
  const arrays = [...nums1, ...nums2]
  // 1.2 新数组长度。
  const len = arrays.length
  // 2.1 生成组数，以便进行希尔排序（本质就是分成几个组进行插入排序）。
  let fraction = 1
  while (fraction < len / 3) {
    fraction = fraction * 3 + 1
  }

  // 2.2 组数不为零就继续循环。
  while (fraction > 0) {
    for (let i = fraction; i < len; i++) {
      // 3.1 新数组第fraction数的值。
      const element = arrays[i]
      let preIndex = i - fraction
      // 3.2 从0开始和 第fraction数进行比较，如果大于，交换位置。
      while (preIndex >= 0 && arrays[preIndex] > element) {
        arrays[preIndex + fraction] = arrays[preIndex]
        preIndex = preIndex - fraction
      }
      arrays[preIndex + fraction] = element
    }
    // 2.3 每次上面for循环执行完，组数向下取整减半。
    fraction = Math.floor(fraction / 2)
  }

  // 4.1 判断排序后的新数组是奇数还是偶数。
  // 4.2 奇数，取中间。偶数，取中间2个数平均值。
  return len % 2 === 0 ? (arrays[len / 2] + arrays[len / 2 - 1]) / 2 : arrays[(len - 1) / 2]
}
```
