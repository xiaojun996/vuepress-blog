---
title: 重写call、apply、bind
date: 2020-08-04 21:32:12
permalink: /pages/6e2f5c/
categories: 
  - javascript
tags: 
  - 
---
```javascript
Function.prototype.myCall = function(...args) {
  if(typeof this !== 'function' || Object.prototype.toString.call(this) !== '[object Function]') {
    throw new TypeError('Must call with funciton!')
  }
  const realThis = args.shift() || globalThis
  const realArgs = args
  const symbolFn = Symbol('fn')
  realThis[symbolFn] = this
  const response = realThis[symbolFn](...realArgs)
  delete realThis[symbolFn]
  return response
}
```

```javascript
Function.prototype.myApply = function(...args) {
  if(typeof this !== 'function' || Object.prototype.toString.call(this) !== '[object Function]') {
    throw new TypeError('Must call with funciton!')
  }
  const realThis = args[0] || globalThis
  const realArgs = args[1]
  const symbolFn = Symbol('fn')
  realThis[symbolFn] = this
  const response = realThis[symbolFn](...realArgs)
  delete realThis[symbolFn]
  return response
}
```

```javascript
Function.prototype.myBind = function(...args) {
  if(typeof this !== 'function' || Object.prototype.toString.call(this) !== '[object Function]') {
    throw new TypeError('Must call with funciton!')
  }
  const _fn = this
  const realThis = args.shift() || globalThis
  const beforeArgs = args
  return function(...afterArgs) {
    return _fn.myApply(realThis, [...beforeArgs, ...afterArgs])
  }
}
```

```javascript
Function.prototype.myBind = function() {
  if(typeof this !== 'function' || Object.prototype.toString.call(this) !== '[object Function]') {
    throw new TypeError('Must call with funciton!')
  }
  var realThis = Array.prototype.slice.call(arguments, 0, 1)[0] || undefined
  var realArgs = Array.prototype.slice.call(arguments, 1) 
  var realFunc = this

  return function() {
    var args = []
    for (var index = 0; index < arguments.length; index++) {
      args.push(arguments[index])
    }
    return realFunc.apply(realThis, Array.prototype.concat.call(realArgs, args))
  }
}
```