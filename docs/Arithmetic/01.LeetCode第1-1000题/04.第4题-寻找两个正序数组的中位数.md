---
title: ç¬¬4é¢˜-å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°
date: 2020-07-22 21:08:59
permalink: /pages/543da2/
categories:
  - LeetCode
tags:
  - ç®—æ³•
---

# [median-of-two-sorted-arrays ğŸ”—](https://leetcode-cn.com/problems/median-of-two-sorted-arrays/)

ç»™å®šä¸¤ä¸ªå¤§å°ä¸º m å’Œ n çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ Â nums1 å’Œ Â nums2ã€‚

è¯·ä½ æ‰¾å‡ºè¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°ï¼Œå¹¶ä¸”è¦æ±‚ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º Â O(log(m + n))ã€‚

ä½ å¯ä»¥å‡è®¾ Â nums1Â  å’Œ Â nums2Â  ä¸ä¼šåŒæ—¶ä¸ºç©ºã€‚

#### ç¤ºä¾‹ 1:

```
nums1 = [1, 3]
nums2 = [2]

åˆ™ä¸­ä½æ•°æ˜¯ 2.0
```

#### ç¤ºä¾‹ 1:

```
nums1 = [1, 2]
nums2 = [3, 4]

åˆ™ä¸­ä½æ•°æ˜¯ (2 + 3)/2 = 2.5
```

<!-- more -->

## æš´åŠ›æ³•ï¼šåˆå¹¶æ•°ç»„ â• å“ˆå¸Œæ’åº

### æ€è·¯

- **åˆå¹¶**æˆä¸€ä¸ª**æ–°æ•°ç»„**
- è¿›è¡Œ**å¸Œå°”æ’åº**
- åˆ¤æ–­æ˜¯**å¶æ•°**è¿˜æ˜¯**å¥‡æ•°**
  - å¥‡æ•°çš„è¯ å–ä¸­é—´
  - å¶æ•°çš„è¯ å–ä¸­é—´ 2 ä¸ªæ•°å¹³å‡å€¼

### ä»£ç 

```JavaScript
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @return {number}
 */
const findMedianSortedArrays = function (nums1, nums2) {
  // 1.1 åˆå¹¶ä¸ºæ–°æ•°ç»„ã€‚
  const arrays = [...nums1, ...nums2]
  // 1.2 æ–°æ•°ç»„é•¿åº¦ã€‚
  const len = arrays.length
  // 2.1 ç”Ÿæˆç»„æ•°ï¼Œä»¥ä¾¿è¿›è¡Œå¸Œå°”æ’åºï¼ˆæœ¬è´¨å°±æ˜¯åˆ†æˆå‡ ä¸ªç»„è¿›è¡Œæ’å…¥æ’åºï¼‰ã€‚
  let fraction = 1
  while (fraction < len / 3) {
    fraction = fraction * 3 + 1
  }

  // 2.2 ç»„æ•°ä¸ä¸ºé›¶å°±ç»§ç»­å¾ªç¯ã€‚
  while (fraction > 0) {
    for (let i = fraction; i < len; i++) {
      // 3.1 æ–°æ•°ç»„ç¬¬fractionæ•°çš„å€¼ã€‚
      const element = arrays[i]
      let preIndex = i - fraction
      // 3.2 ä»0å¼€å§‹å’Œ ç¬¬fractionæ•°è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå¤§äºï¼Œäº¤æ¢ä½ç½®ã€‚
      while (preIndex >= 0 && arrays[preIndex] > element) {
        arrays[preIndex + fraction] = arrays[preIndex]
        preIndex = preIndex - fraction
      }
      arrays[preIndex + fraction] = element
    }
    // 2.3 æ¯æ¬¡ä¸Šé¢forå¾ªç¯æ‰§è¡Œå®Œï¼Œç»„æ•°å‘ä¸‹å–æ•´å‡åŠã€‚
    fraction = Math.floor(fraction / 2)
  }

  // 4.1 åˆ¤æ–­æ’åºåçš„æ–°æ•°ç»„æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°ã€‚
  // 4.2 å¥‡æ•°ï¼Œå–ä¸­é—´ã€‚å¶æ•°ï¼Œå–ä¸­é—´2ä¸ªæ•°å¹³å‡å€¼ã€‚
  return len % 2 === 0 ? (arrays[len / 2] + arrays[len / 2 - 1]) / 2 : arrays[(len - 1) / 2]
}
```

## ç¬¬ K å°æ•°æŠ˜åŠå‰”é™¤æ³•

### æ€è·¯

<img style="margin: 30px 0 0;" src="https://cdn.jsdelivr.net/gh/xiaojun996/CDN/images/leetcode/1600781682790.png" />

- ä¸¤ä¸ªæ•°ç»„çš„æ€»ä¸ªæ•°ä¸º**n**ï¼Œä¸­ä½æ•°æ˜¯**k = Math.ceil(n/2)**
- å‡å¦‚è¿™ 2 ä¸ªæ•°ç»„åˆ†åˆ«ä¸ºï¼š

  - A æ•°ç»„
    | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 |
    | --- | --- | -- | -- | --| -- | -- | -- |
  - B æ•°ç»„
    | 9 | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 |
    | --- | --- | -- | -- | --| -- | -- | -- | -- |

- æ€»ä¸ªæ•° n ä¸º **17**

#### ç¬¬ä¸€è½® k ä¸º 9

- ç¬¬ k ä¸­ä½æ•°æŠ˜åŠ **Math.floor(k / 2)** ä¸º **4**
- A æ•°ç»„ç¬¬ 4 ä¸ªæ•°å¯¹æ¯” B æ•°ç»„ç¬¬ 4 ä¸ªæ•°ï¼š

  - A æ•°ç»„
    | 1 | 2 | 3| <u>4</u> | 5 | 6 | 7 | 8 |
    | --- | --- | -- | -- | --| -- | -- | -- |
  - B æ•°ç»„
    | 9 | 10 | 11 | <u>12</u> | 13 | 14 | 15 | 16 | 17 |
    | --- | --- | -- | -- | --| -- | -- | -- | -- |
  - å› ä¸º A æ•°ç»„ç¬¬ 4 ä¸ªæ•°ï¼š**<u>4</u>**ï¼Œå°äº B æ•°ç»„ç¬¬ 4 ä¸ªæ•°ï¼š**<u>12</u>**
  - æ‰€ä»¥åˆ é™¤ A æ•°ç»„ å·¦è¾¹ 4 ä¸ª

#### ç¬¬äºŒè½® k ä¸º 9 - 4 = 5

- ç¬¬ k ä¸­ä½æ•°æŠ˜åŠ **Math.floor(k / 2)** ä¸º **2**
- A æ•°ç»„ç¬¬ 2 ä¸ªæ•°å¯¹æ¯” B æ•°ç»„ç¬¬ 2 ä¸ªæ•°ï¼š

  - A æ•°ç»„
    | <font color=grey>~~1~~</font> | <font color=grey>~~2~~</font> | <font color=grey>~~3~~</font> | <font color=grey>~~4~~</font> | 5 | <u>6</u> | 7 | 8 |
    | --- | --- | -- | -- | --| -- | -- | -- |
  - B æ•°ç»„
    | 9 | <u>10</u> | 11 | 12 | 13 | 14 | 15 | 16 | 17 |
    | --- | --- | -- | -- | --| -- | -- | -- | -- |
  - å› ä¸º A æ•°ç»„ç¬¬ 2 ä¸ªæ•°ï¼š**<u>6</u>**ï¼Œå°äº B æ•°ç»„ç¬¬ 2 ä¸ªæ•°ï¼š**<u>10</u>**
  - æ‰€ä»¥åˆ é™¤ A æ•°ç»„ å·¦è¾¹ 2 ä¸ª

#### ç¬¬ä¸‰è½® k ä¸º 5 - 2 = 3

- ç¬¬ k ä¸­ä½æ•°æŠ˜åŠ **Math.floor(k / 2)** ä¸º **1**
- A æ•°ç»„ç¬¬ 1 ä¸ªæ•°å¯¹æ¯” B æ•°ç»„ç¬¬ 1 ä¸ªæ•°ï¼š

  - A æ•°ç»„
    | <font color=grey>~~1~~</font> | <font color=grey>~~2~~</font> | <font color=grey>~~3~~</font> | <font color=grey>~~4~~</font> | <font color=grey>~~5~~</font> | <font color=grey>~~6~~</font> | <u>7</u> | 8 |
    | --- | --- | -- | -- | --| -- | -- | -- |
  - B æ•°ç»„
    | <u>9</u> | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 |
    | --- | --- | -- | -- | --| -- | -- | -- | -- |
  - å› ä¸º A æ•°ç»„ç¬¬ 1 ä¸ªæ•°ï¼š**<u>7</u>**ï¼Œå°äº B æ•°ç»„ç¬¬ 1 ä¸ªæ•°ï¼š**<u>9</u>**
  - æ‰€ä»¥åˆ é™¤ A æ•°ç»„ å·¦è¾¹ 1 ä¸ª

#### ç¬¬å››è½® k ä¸º 3 - 1 = 2

- ç¬¬ k ä¸­ä½æ•°æŠ˜åŠ **Math.floor(k / 2)** ä¸º **1**
- A æ•°ç»„ç¬¬ 1 ä¸ªæ•°å¯¹æ¯” B æ•°ç»„ç¬¬ 1 ä¸ªæ•°ï¼š

  - A æ•°ç»„
    | <font color=grey>~~1~~</font> | <font color=grey>~~2~~</font> | <font color=grey>~~3~~</font> | <font color=grey>~~4~~</font> | <font color=grey>~~5~~</font> | <font color=grey>~~6~~</font> | <font color=grey>~~7~~</font> | <u>8</u> |
    | --- | --- | -- | -- | --| -- | -- | -- |
  - B æ•°ç»„
    | <u>9</u> | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 |
    | --- | --- | -- | -- | --| -- | -- | -- | -- |
  - å› ä¸º A æ•°ç»„ç¬¬ 1 ä¸ªæ•°ï¼š**<u>8</u>**ï¼Œå°äº B æ•°ç»„ç¬¬ 1 ä¸ªæ•°ï¼š**<u>9</u>**
  - æ‰€ä»¥åˆ é™¤ A æ•°ç»„ å·¦è¾¹ 1 ä¸ª

#### ç¬¬äº”è½® k ä¸º 2 - 1 = 1

- ç¬¬ k ä¸­ä½æ•°æŠ˜åŠ **Math.floor(k / 2)** ä¸º **0**
- A æ•°ç»„ç¬¬ 0 ä¸ªæ•°å¯¹æ¯” B æ•°ç»„ç¬¬ 1 ä¸ªæ•°ï¼š

  - A æ•°ç»„
    | <font color=grey>~~1~~</font> | <font color=grey>~~2~~</font> | <font color=grey>~~3~~</font> | <font color=grey>~~4~~</font> | <font color=grey>~~5~~</font> | <font color=grey>~~6~~</font> | <font color=grey>~~7~~</font> | <font color=grey>~~8~~</font> |
    | --- | --- | -- | -- | --| -- | -- | -- |
  - B æ•°ç»„
    | <u>9</u> | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 |
    | --- | --- | -- | -- | --| -- | -- | -- | -- |
  - å› ä¸º A æ•°ç»„ç¬¬ 0 ä¸ªæ•°å·²ç»æ²¡æœ‰äº†
  - æ‰€ä»¥ **<u>9</u>** æ˜¯è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°

### ä»£ç 

```JavaScript
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @return {number}
 */
const findMedianSortedArrays = (nums1, nums2) => {
  const len1 = nums1.length
  const len2 = nums2.length
  // äº¤æ¢ä½ç½® ä¿æŒé•¿åº¦å°çš„åœ¨å‰é¢
  if (len1 > len2) return findMedianSortedArrays(nums2, nums1)
  const len = len1 + len2
  let start = 0
  let end = len1
  let partLen1 = undefined
  let partLen2 = undefined

  while (start <= end) {
    // start + end é™¤ 2 å‘ä¸‹å–æ•´ï¼Œ æ˜¯ Aç»„çš„ç¬¬ partLen1 ä¸­ä½æ•°
    partLen1 = (start + end) >> 1
    // æ€»é•¿åº¦ + 1 é™¤ 2 å‘ä¸Šå–æ•´ï¼Œ æ˜¯ Bç»„çš„ç¬¬ partLen2 ä¸­ä½æ•°
    partLen2 = ((len + 1) >> 1) - partLen1

    let L1 = partLen1 === 0 ? -Infinity : nums1[partLen1 - 1]
    let L2 = partLen2 === 0 ? -Infinity : nums2[partLen2 - 1]
    let R1 = partLen1 === len1 ? Infinity : nums1[partLen1]
    let R2 = partLen2 === len2 ? Infinity : nums2[partLen2]

    if (L1 > R2) {
      end = partLen1 - 1
    } else if (L2 > R1) {
      start = partLen1 + 1
    } else {
      // L1 <= R2 && L2 <= R1
      // åˆ¤æ–­å¥‡å¶æ€§
      return len % 2 === 0 ? (Math.max(L1, L2) + Math.min(R1, R2)) / 2 : Math.max(L1, L2)
    }
  }
}
```
