---
title: ç¬¬399é¢˜-é™¤æ³•æ±‚å€¼
date: 2021-01-06 21:51:38
permalink: /pages/7011d9/
categories:
  - LeetCode
tags:
  - ç®—æ³•
  - å›¾
  - å¹¿åº¦ä¼˜å…ˆæœç´¢
---

## [é™¤æ³•æ±‚å€¼](https://leetcode-cn.com/problems/positions-of-large-groups/)

ç»™ä½ ä¸€ä¸ªå˜é‡å¯¹æ•°ç»„ <font style="background: #eee; color: #666;">equations</font> å’Œä¸€ä¸ªå®æ•°å€¼æ•°ç»„ <font style="background: #eee; color: #666;">values</font> ä½œä¸ºå·²çŸ¥æ¡ä»¶ï¼Œå…¶ä¸­ <font style="background: #eee; color: #666;">equations[i] = [Ai, Bi]</font> å’Œ <font style="background: #eee; color: #666;">values[i]</font> å…±åŒè¡¨ç¤ºç­‰å¼ <font style="background: #eee; color: #666;">Ai / Bi = values[i]</font> ã€‚æ¯ä¸ª <font style="background: #eee; color: #666;">Ai</font> æˆ– <font style="background: #eee; color: #666;">Bi</font> æ˜¯ä¸€ä¸ªè¡¨ç¤ºå•ä¸ªå˜é‡çš„å­—ç¬¦ä¸²ã€‚

å¦æœ‰ä¸€äº›ä»¥æ•°ç»„ <font style="background: #eee; color: #666;">queries</font> è¡¨ç¤ºçš„é—®é¢˜ï¼Œå…¶ä¸­ <font style="background: #eee; color: #666;">queries[j] = [Cj, Dj]</font> è¡¨ç¤ºç¬¬ <font style="background: #eee; color: #666;">j</font> ä¸ªé—®é¢˜ï¼Œè¯·ä½ æ ¹æ®å·²çŸ¥æ¡ä»¶æ‰¾å‡º <font style="background: #eee; color: #666;">Cj / Dj = ?</font> çš„ç»“æœä½œä¸ºç­”æ¡ˆã€‚

è¿”å› **æ‰€æœ‰é—®é¢˜çš„ç­”æ¡ˆ** ã€‚å¦‚æœå­˜åœ¨æŸä¸ªæ— æ³•ç¡®å®šçš„ç­”æ¡ˆï¼Œåˆ™ç”¨ <font style="background: #eee; color: #666;">-1.0</font> æ›¿ä»£è¿™ä¸ªç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥ï¼šequations = [["a","b"],["b","c"]], values = [2.0,3.0], queries = [["a","c"],["b","a"],["a","e"],["a","a"],["x","x"]]
è¾“å‡ºï¼š[6.00000,0.50000,-1.00000,1.00000,-1.00000]
è§£é‡Šï¼š
æ¡ä»¶ï¼ša / b = 2.0, b / c = 3.0
é—®é¢˜ï¼ša / c = ?, b / a = ?, a / e = ?, a / a = ?, x / x = ?
ç»“æœï¼š[6.0, 0.5, -1.0, 1.0, -1.0 ]
```

<!-- more -->

**ç¤ºä¾‹ 2:**

```
è¾“å…¥ï¼šequations = [["a","b"],["b","c"],["bc","cd"]], values = [1.5,2.5,5.0], queries = [["a","c"],["c","b"],["bc","cd"],["cd","bc"]]
è¾“å‡ºï¼š[3.75000,0.40000,5.00000,0.20000]
```

**ç¤ºä¾‹ 3:**

```
è¾“å…¥ï¼šequations = [["a","b"]], values = [0.5], queries = [["a","b"],["b","a"],["a","c"],["x","y"]]
è¾“å‡ºï¼š[0.50000,2.00000,-1.00000,-1.00000]
```

**æç¤º:**

- 1 <= equations.length <= 20
- equations[i].length == 2
- 1 <= Ai.length, Bi.length <= 5
- values.length == equations.length
- 0.0 < values[i] <= 20.0
- 1 <= queries.length <= 20
- queries[i].length == 2
- 1 <= Cj.length, Dj.length <= 5
- Ai, Bi, Cj, Dj ç”±å°å†™è‹±æ–‡å­—æ¯ä¸æ•°å­—ç»„æˆ

## å¹¿åº¦ä¼˜å…ˆæœç´¢ å’Œ å›¾

### æ€è·¯

- ä½¿ç”¨å›¾å­˜ x y c çš„å…³ç³»
- ä½¿ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢æŸ¥æ¸…å…³ç³»
- è¯·çœ‹æ³¨é‡Š

::: warning æ€è·¯å‡ºå¤„
title: å›¾

æ„Ÿè°¢å¤§ä½¬çš„ä»£ç ï¼Œå°å¼Ÿåªæ˜¯æŠŠå¤§ä½¬ä»£ç è¯»ä¸€éï¼ŒåŠ ä»¥æ³¨é‡Šï¼ŒåŠ ä»¥ç†è§£

author: [å°å®‡](https://leetcode-cn.com/problems/remove-duplicate-letters/solution/ha-xi-biao-shu-zu-zhan-5xing-dai-ma-2jie-ttcd/)
:::

### ä»£ç 

```TypeScript
/**
 * å‚è€ƒä¾‹å­
 * equations = [["a","b"],["b","c"]],
 * values = [2.0,3.0],
 * queries = [["a","c"],["b","a"],["a","e"],["a","a"],["x","x"]]
 */

const calcEquation = (equations: string[][], values: number[], queries: string[][]): number[] => {
  const grapf: object = Object.create(null)

  // ç”Ÿæˆå›¾
  for (let i: number = 0; i < values.length; i++) {
    const x: string = equations[i][0]
    const y: string = equations[i][1]
    const value = values[i]
    if (!grapf[x]) grapf[x] = Object.create(null)
    grapf[x][y] = value
    if (!grapf[y]) grapf[y] = Object.create(null)
    grapf[y][x] = 1 / value
  }
  /**
   * å›¾ç»“æ„
   * [Object: null prototype] {
   *   a: [Object: null prototype] { b: 2 },
   *   b: [Object: null prototype] { a: 0.5, c: 3 },
   *   c: [Object: null prototype] { b: 0.3333333333333333 }
   * }
   */

  // visited è¿™ä¸ªsetç»“æ„æ˜¯è®°å½•æ˜¯å¦ "è§è¿‡" æ˜¯å¦ "å‚è§‚è¿‡"
  // é¿å… ğŸš€ğŸš€ğŸš€ å¹¿åº¦ä¼˜å…ˆæœç´¢ ğŸš€ğŸš€ğŸš€ æ—¶æ­»å¾ªç¯æ— é™é€’å½’
  const visited: Set<string> = new Set()
  const d = (x: string, y: string): number => {
    // æ²¡æœ‰è¢«é™¤æ•° ç›´æ¥è¿”å› - 1
    if (!grapf[x]) return -1
    // éƒ½æœ‰ï¼Œå°±ç›´æ¥è¿”å›è¯¥å€¼
    if (grapf[x][y]) return grapf[x][y]

    // å…¶ä»–é™¤æ•° 'c' çš„æ•°ç»„
    const k: string[] = Object.keys(grapf[x])
    for (let i: number = 0; i < values.length; i++) {
      // å¦‚æœæœ‰ c è¿™ä¸ªé™¤æ•°
      // è¯´æ˜ c æ­£åœ¨è¢«è°ƒæ•™ä¸­ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†è°ƒæ•™å•¦ï½ï½ğŸ‘¯
      if (!visited.has(k[i])) {
        visited.add(k[i])
        // ğŸš€ğŸš€ğŸš€ å¹¿åº¦ä¼˜å…ˆæœç´¢ ğŸš€ğŸš€ğŸš€ å¯»æ‰¾å¦ä¸€ä¸ª c / y çš„å€¼
        const t: number = d(k[i], y)
        visited.delete(k[i])
        // å¦‚æœ c / y çš„å€¼ æ˜¯æœ‰å€¼çš„ï¼Œè¿”å› x / c * (c / y) = x / yã€‚
        // ğŸ¤¡c: å°ä¸‘ç«Ÿæ˜¯æˆ‘è‡ªå·±ï¼ï¼ï¼ï¼ æˆ‘å“­äº†QAQ å˜¤å˜¤å˜¤
        if (t !== -1) return grapf[x][k[i]] * t
      }
    }
    return -1
  }
  return queries.map(([x, y]) => d(x, y))
}
```
