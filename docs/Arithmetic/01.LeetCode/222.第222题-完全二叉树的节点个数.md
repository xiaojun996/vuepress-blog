---
title: ç¬¬222é¢˜-å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°
date: 2020-11-24 12:17:02
permalink: /pages/822aed/
categories:
  - LeetCode
tags:
  - ç®—æ³•
  - äºŒå‰æ ‘
---

## [å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°](https://leetcode-cn.com/problems/count-complete-tree-nodes/)

ç»™å‡ºä¸€ä¸ª**å®Œå…¨äºŒå‰æ ‘**ï¼Œæ±‚å‡ºè¯¥æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°ã€‚

**è¯´æ˜:**

[å®Œå…¨äºŒå‰æ ‘](https://baike.baidu.com/item/%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91/7773232?fr=aladdin)çš„å®šä¹‰å¦‚ä¸‹ï¼šåœ¨å®Œå…¨äºŒå‰æ ‘ä¸­ï¼Œé™¤äº†æœ€åº•å±‚èŠ‚ç‚¹å¯èƒ½æ²¡å¡«æ»¡å¤–ï¼Œå…¶ä½™æ¯å±‚èŠ‚ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§å€¼ï¼Œå¹¶ä¸”æœ€ä¸‹é¢ä¸€å±‚çš„èŠ‚ç‚¹éƒ½é›†ä¸­åœ¨è¯¥å±‚æœ€å·¦è¾¹çš„è‹¥å¹²ä½ç½®ã€‚è‹¥æœ€åº•å±‚ä¸ºç¬¬ h å±‚ï¼Œåˆ™è¯¥å±‚åŒ…å« 1~Â 2^hÂ  ä¸ªèŠ‚ç‚¹ã€‚

**ç¤ºä¾‹:**

```
è¾“å…¥:
    1
   / \
  2   3
 / \  /
4  5 6

è¾“å‡º: 6
```

<!-- more -->

## é€’å½’

### æ€è·¯

- æ ¹èŠ‚ç‚¹ â• å·¦è¾¹èŠ‚ç‚¹é€’å½’ â• å³è¾¹èŠ‚ç‚¹é€’å½’
- å¦‚æœä¸º null å°± return 0

### ä»£ç 

```JavaScript
/**
 * Definition for a binary tree node.
 * function TreeNode(val) {
 *     this.val = val;
 *     this.left = this.right = null;
 * }
 */
/**
 * @param {TreeNode} root
 * @return {number}
 */
const countNodes = root => {
  if (!root) return 0

  return 1 + countNodes(root.left) + countNodes(root.right)
}
```

## è´ªå¿ƒæ³• â• é€’å½’

### æ€è·¯

- è·å– root ä¸‹å·¦è¾¹ ğŸ‘ˆ èŠ‚ç‚¹çš„ï¼ˆå·¦èŠ‚ç‚¹ï¼‰æ·±åº¦
- è·å– root ä¸‹å³è¾¹ ğŸ‘‰ èŠ‚ç‚¹çš„ï¼ˆå·¦èŠ‚ç‚¹ï¼‰æ·±åº¦
- å¦‚æœ root ä¸‹å·¦å³èŠ‚ç‚¹ï¼ˆå·¦èŠ‚ç‚¹ï¼‰æ·±åº¦ä¸€æ ·
  - è¯´æ˜ root ä¸‹å·¦è¾¹ ğŸ‘ˆ éƒ½æ˜¯æ»¡èŠ‚ç‚¹
  - èŠ‚ç‚¹æ•° = 1ï¼ˆroot è‡ªèº«ï¼‰â• (2 ^ å·¦è¾¹æ·±åº¦ - 1) â• é‡å¤ç¬¬ä¸€æ­¥é€’å½’ï¼ˆå³è¾¹èŠ‚ç‚¹ï¼‰
- å¦‚æœ root ä¸‹å·¦å³èŠ‚ç‚¹ï¼ˆå·¦èŠ‚ç‚¹ï¼‰æ·±åº¦ä¸ä¸€æ ·
  - è¯´æ˜ root ä¸‹å³è¾¹ ğŸ‘ˆ éƒ½æ˜¯æ»¡èŠ‚ç‚¹
  - èŠ‚ç‚¹æ•° = 1ï¼ˆroot è‡ªèº«ï¼‰â• (2 ^ å³è¾¹æ·±åº¦ - 1) â• é‡å¤ç¬¬ä¸€æ­¥é€’å½’ï¼ˆå·¦è¾¹èŠ‚ç‚¹ï¼‰

### ä»£ç 

```JavaScript
/**
 * Definition for a binary tree node.
 * function TreeNode(val) {
 *     this.val = val;
 *     this.left = this.right = null;
 * }
 */
/**
 * @param {TreeNode} root
 * @return {number}
 */
const countNodes = root => {
  if (!root) return 0
  let ld = getDepth(root.left)
  let rd = getDepth(root.right)
  // è¯´æ˜å·¦å­æ ‘æ˜¯æ»¡çš„
  if (ld === rd) {
    // å·¦æ»¡ â• å³è¾¹ğŸ‘‰
    return (1 << ld) + countNodes(root.right)
  }
  // è¯´æ˜å³å­æ ‘æ˜¯æ»¡çš„
  else {
    // å³æ»¡ â• å·¦è¾¹ğŸ‘‰
    return (1 << rd) + countNodes(root.left)
  }
}

const getDepth = root => {
  let depth = 0
  while (root) {
    depth++
    root = root.left
  }
  return depth
}
```
